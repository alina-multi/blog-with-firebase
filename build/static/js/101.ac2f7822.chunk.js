"use strict";(self.webpackChunkblog_with_firebase=self.webpackChunkblog_with_firebase||[]).push([[101],{1407:function(e,t,s){s.d(t,{w:function(){return m},y:function(){return o}});var n=s(4165),r=s(5861),a=s(673),i=s(2481),l=s(8255),c=s(276);function o(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((0,n.Z)().mark((function e(t,s){var r,c,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.I8.currentUser,e.next=3,(0,l.ck)(r,t);case 3:return c=(0,i.JU)(a.u8,r.uid),(o=(0,i.pl)(c,t,{merge:!0}))&&s({type:"UPDATE_PROFILE",payload:t}),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((0,n.Z)().mark((function e(t,s){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.iH)(a.tO,"avatar/"+s.uid+".jpg"),e.next=3,(0,c.KV)(r,t);case 3:return e.next=5,(0,c.Jt)(r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9101:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var n=s(4165),r=s(5861),a=s(9439),i=s(2791),l=s(2801),c=s(9011),o=s(3299),u=s.n(o),m=s(184);function d(e){var t=e.src,s=e.modalOpen,o=e.setModalOpen,d=e.setPreview,p=e.setPhotoURL,f=(0,i.useState)(10),x=(0,a.Z)(f,2),h=x[0],v=x[1],b=(0,i.useRef)(null),y=(0,i.useRef)(null),g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=3;break}return j(),e.abrupt("return");case 3:return t=y.current.getImage().toDataURL(),e.next=6,fetch(t);case 6:return s=e.sent,e.next=9,s.blob();case 9:r=e.sent,d(URL.createObjectURL(r)),p(r),o(!1),v(10);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){o(!1),v(10)};return(0,m.jsx)(l.u.Root,{show:s,as:i.Fragment,children:(0,m.jsxs)(c.V,{as:"div",className:"relative z-50",initialFocus:b,onClose:o,children:[(0,m.jsx)(l.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)("div",{className:"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity"})}),(0,m.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,m.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,m.jsx)(l.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,m.jsxs)(c.V.Panel,{className:"relative transform overflow-hidden rounded-lg bg-zinc-900 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,m.jsx)(u(),{ref:y,image:t,style:{width:"100%",height:"100%"},border:50,borderRadius:150,color:[0,0,0,.72],scale:h/10,rotate:0}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"zoom",className:"mb-2 inline-block text-neutral-700 dark:text-neutral-200",children:"zoom"}),(0,m.jsx)("input",{min:10,max:50,value:h,onChange:function(e){return v(e.target.value)},type:"range",className:"transparent accent-sky-500 h-1.5 w-full cursor-pointer appearance-none rounded-lg border-transparent bg-neutral-200",id:"zoom"})]})]})}),(0,m.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[(0,m.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-sm bg-sky-600 px-3 py-2 text-sm font-semibold text-zinc-100 shadow-sm hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 sm:col-start-2",onClick:function(){return g()},children:"Save"}),(0,m.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-sm bg-zinc-500 text-white px-3 py-2 text-sm font-semibold hadow-sm ring-1 ring-inset ring-zinc-800 hover:bg-zinc-50 sm:col-start-1 sm:mt-0",onClick:j,children:"Cancel"})]})]})})})})]})})}function p(e){var t=e.preview,s=e.setPreview,n=e.setPhotoURL,r=(0,i.useState)(null),l=(0,a.Z)(r,2),c=l[0],o=l[1],u=(0,i.useState)(!1),p=(0,a.Z)(u,2),f=p[0],x=p[1],h=(0,i.useRef)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d,{modalOpen:f,setModalOpen:x,src:c,setPreview:s,setPhotoURL:n}),(0,m.jsxs)("div",{className:"flex gap-3 items-center pt-6",children:[(0,m.jsx)("div",{className:"border  rounded-full ",children:(0,m.jsx)("img",{src:t||" https://www.signivis.com/img/custom/avatars/member-avatar-01.png",alt:"",className:"w-28 rounded-full object-cover"})}),(0,m.jsx)("button",{type:"button",onClick:function(e){h.current.click()},className:"rounded-sm bg-sky-500 text-zinc-100 px-4 py-2",children:"Select Image"}),(0,m.jsx)("input",{type:"file",accept:"image/*",ref:h,onChange:function(e){var t=e.target.files[0];t&&(o(URL.createObjectURL(t)),x(!0))},className:"hidden"})]})]})}var f=s(1407),x=s(3581),h=s(6207),v=s(7293),b=s(4598),y=s(3402);function g(){var e=(0,i.useContext)(x.V),t=e.currentUser,s=e.dispatch,l=(0,i.useState)(t.photoURL),c=(0,a.Z)(l,2),o=c[0],u=c[1],d=(0,i.useState)(null),g=(0,a.Z)(d,2),j=g[0],w=g[1],k=(0,i.useState)(t.displayName),N=(0,a.Z)(k,2),Z=N[0],R=N[1],U=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=t.photoURL,!j){e.next=6;break}return e.next=5,(0,f.w)(j,t);case 5:a=e.sent;case 6:(0,f.y)({displayName:Z,photoURL:a},s)&&y.Am.success("Profile Updated");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsxs)(h.Z,{children:[(0,m.jsx)(b.Z,{}),(0,m.jsxs)("form",{className:"w-3/4 mx-auto mt-20 pt-12",onSubmit:U,children:[(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)("h2",{className:"text-center text-2xl font-bold leading-9 tracking-tight text-zinc-100",children:"Personal Information"}),(0,m.jsx)("p",{className:"mt-1 text-center text-sm leading-6 text-zinc-400",children:"This information will be displayed publicly so be careful what you share."}),(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsx)(p,{preview:o,setPreview:u,setPhotoURL:w})}),(0,m.jsx)(v.Z,{props:{label:"Username",setValue:R,value:Z,type:"text",name:"username",id:"username"}})]}),(0,m.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,m.jsx)("button",{type:"button",className:"text-sm font-semibold leading-6 text-zinc-100",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"rounded-sm bg-sky-500 px-3 py-2 text-sm font-semibold text-zinc-100 shadow-sm hover:bg-sky-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500",children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=101.ac2f7822.chunk.js.map