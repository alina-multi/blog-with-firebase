"use strict";(self.webpackChunkblog_with_firebase=self.webpackChunkblog_with_firebase||[]).push([[928],{9033:function(e,t,n){n.d(t,{q:function(){return s}});var r=n(184);function s(e){var t=e.time;return(0,r.jsx)("div",{className:"flex gap-3 items-center text-sm text-zinc-400 ",children:(0,r.jsx)("time",{children:null===t||void 0===t?void 0:t.toDate().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})}},4813:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.value,n=e.setValue,s=e.rows,i=e.name,o=e.id,a=e.required,c=e.placeholder,l=e.label;return(0,r.jsxs)("div",{className:"space-y-3 w-full",children:[l&&(0,r.jsx)("label",{htmlFor:o,className:"block text-sm font-medium leading-6 text-white",children:l}),(0,r.jsx)("textarea",{value:t,onChange:function(e){return n(e.target.value)},rows:s,name:i,id:o,required:a,className:"block w-full rounded-sm border-0 bg-white/5 px-3.5 py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-sky-500 sm:text-sm sm:leading-6",placeholder:c})]})}},8788:function(e,t,n){var r=n(1087),s=n(184);t.Z=function(e){var t=e.postId;return(0,s.jsx)(r.OL,{to:"/editpost/".concat(t),className:"z-20 hover:text-sky-400 text-zinc-300 text-sm font-semibold  px-2 py-1 shadow-xl  bg-zinc-800 rounded-sm",children:"Edit Post"})}},9176:function(e,t,n){n.d(t,{p:function(){return i}});var r=n(1087),s=n(184);function i(e){var t=e.user;return(0,s.jsxs)(r.OL,{to:"/profile/".concat(null===t||void 0===t?void 0:t.uid),className:"flex items-center gap-x-4 hover:underline",children:[(0,s.jsx)("img",{src:(null===t||void 0===t?void 0:t.photoURL)||"https://media.tenor.com/O7iUTKsWo4gAAAAC/space-cat.gif",alt:"",className:"h-10 w-10 rounded-full bg-zinc-400 object-cover"}),(0,s.jsx)("p",{className:"font-semibold text-sm leading-6",children:null===t||void 0===t?void 0:t.displayName})]})}},1363:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(4165),s=n(1413),i=n(5861),o=n(2481),a=n(673);function c(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.JU)(a.db,"posts",t),e.next=3,(0,o.QT)(n);case 3:if(!(i=e.sent).exists()){e.next=9;break}return c=i.data(),e.abrupt("return",(0,s.Z)((0,s.Z)({},c),{},{id:i.id}));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8928:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(9439),s=n(6207),i=n(2791),o=n(7689),a=n(9271),c=n(3581),l=n(9176),u=n(9033),d=n(1413),m=n(2481),x=n(673),f=n(4165),p=n(5861),h=n(8698),v=n(184);function b(e){var t=e.comment,n=e.newComment,s=e.setNewComment,o=(0,i.useContext)(c.V).currentUser,l=(0,i.useState)(null),u=(0,r.Z)(l,2),d=u[0],b=u[1],g=(0,i.useState)(!1),j=(0,r.Z)(g,2),w=j[0],N=j[1],y=(0,i.useState)(!1),Z=(0,r.Z)(y,2),k=Z[0],C=Z[1],I=(0,i.useRef)(null);(0,i.useEffect)((function(){(0,a.B)(t.authorID).then((function(e){return b(e)})),N((null===t||void 0===t?void 0:t.authorID)===(null===o||void 0===o?void 0:o.uid)),n&&(I.current.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){s(null)}),1e3))}),[t,null===o||void 0===o?void 0:o.uid,n,s]);var z=function(){var e=(0,p.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),setTimeout((function(){var e=(0,m.JU)(x.db,"comments",t);(0,m.oe)(e),C(!1)}),750);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:(0,h.A)("flex gap-3 transition-opacity duration-500 ",t.id===n?"opacity-50":"opacity-100",k&&"opacity-50"),ref:I,children:[(0,v.jsx)("img",{src:null===d||void 0===d?void 0:d.photoURL,alt:"",className:"h-10 w-10 rounded-full bg-zinc-400"}),(0,v.jsxs)("div",{className:"flex flex-col gap-2 ",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 ",children:[(0,v.jsx)("p",{className:"leading-4 font-semibold ",children:null===d||void 0===d?void 0:d.displayName}),w&&(0,v.jsx)("button",{className:"text-sm border-l border-zinc-700 pl-3 text-zinc-400 hover:text-red-500",onClick:function(){return z(t.id)},children:"Delete"})]}),(0,v.jsx)("p",{className:" rounded-md bg-zinc-800 border border-zinc-700 max-w-max p-3",children:t.text})]})]})}var g=n(4813);var j=function(e){var t=e.postId,n=e.setNewComment,s=(0,i.useState)(""),o=(0,r.Z)(s,2),a=o[0],l=o[1],u=(0,i.useContext)(c.V).currentUser,d=function(){var e=(0,p.Z)((0,f.Z)().mark((function e(r){var s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(a.trim().length<1)){e.next=5;break}return l(""),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,m.ET)(x.HF,{postId:t,text:a,authorID:u.uid,createdAt:(0,m.Bt)(),photo:u.photoURL});case 8:s=e.sent,n(s.id),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:l("");case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"flex items-center gap-3 ",children:[(0,v.jsx)("a",{href:"/".concat(null===u||void 0===u?void 0:u.uid),className:"h-16 w-16 rounded-full bg-zinc-400 overflow-hidden shrink-0",children:(0,v.jsx)("img",{src:(null===u||void 0===u?void 0:u.photoURL)||"https://media.tenor.com/O7iUTKsWo4gAAAAC/space-cat.gif",alt:"",className:"h-16 w-16 rounded-full object-cover"})}),(0,v.jsxs)("form",{onSubmit:d,className:"flex w-full  items-center gap-6",children:[(0,v.jsx)(g.Z,{value:a,setValue:l,rows:"2",placeholder:"Add a comment...",id:"comment",name:"comment",required:!0,label:!1}),(0,v.jsx)("button",{type:"submit",className:"flex-none border-1 px-6 py-1 ring-2 ring-sky-600 rounded-sm bg-sky-600",children:"Post"})]})]})};function w(){return(0,v.jsx)("div",{className:"text-lg text-center text-zinc-400",children:(0,v.jsx)("p",{children:"No comments yet. Be the first to comment"})})}var N=function(e){var t=e.postId,n=(0,i.useState)([]),s=(0,r.Z)(n,2),o=s[0],a=s[1],l=(0,i.useContext)(c.V).currentUser,u=(0,i.useState)(null),f=(0,r.Z)(u,2),p=f[0],h=f[1],g=(0,i.useRef)(null);return(0,i.useEffect)((function(){"#addComment"===window.location.hash&&g.current.scrollIntoView({behavior:"smooth",block:"center"});var e=(0,m.IO)(x.HF,(0,m.ar)("postId","==",t),(0,m.Xo)("createdAt","asc")),n=(0,m.cf)(e,(function(e){var t=e.docs.map((function(e){return(0,d.Z)({id:e.id},e.data())}));a(t)}));return function(){return n()}}),[t]),(0,v.jsxs)("div",{className:" space-y-3 ",ref:g,children:[l&&(0,v.jsx)("div",{className:"mx-16 pb-6",children:(0,v.jsx)(j,{postId:t,setNewComment:h})}),(0,v.jsx)("p",{className:"font-semibold text-lg mx-16 leading-4 ",children:" Comments"}),(0,v.jsxs)("div",{className:"mx-16 space-y-6 border rounded-sm  p-6 border-zinc-800  bg-zinc-800/20",children:[!l&&(0,v.jsx)("div",{className:"py-3 text-center text-sky-500 text-lg border-b border-zinc-800",children:"Sign in to comment "}),o.length>0?(0,v.jsx)("ul",{className:"space-y-6",children:o.map((function(e){return(0,v.jsx)("li",{children:(0,v.jsx)(b,{comment:e,newComment:p,setNewComment:h})},e.id)}))}):(0,v.jsx)(w,{})]})]})},y=n(1363),Z=n(8788);function k(){var e=(0,i.useState)(null),t=(0,r.Z)(e,2),n=t[0],d=t[1],m=(0,i.useState)(null),x=(0,r.Z)(m,2),f=x[0],p=x[1],h=(0,i.useState)(!0),b=(0,r.Z)(h,2),g=b[0],j=b[1],w=(0,i.useState)(!1),k=(0,r.Z)(w,2),C=k[0],I=k[1],z=(0,i.useContext)(c.V).currentUser,S=(0,o.UO)().postId;return(0,i.useEffect)((function(){j(!0),(0,y.Z)(S).then((function(e){d(e),(0,a.B)(null===e||void 0===e?void 0:e.authorID).then((function(e){return p(e)})),I((null===e||void 0===e?void 0:e.authorID)===(null===z||void 0===z?void 0:z.uid)),j(!1)}))}),[S,null===z||void 0===z?void 0:z.uid,null===n||void 0===n?void 0:n.authorID]),!g&&(0,v.jsx)(s.Z,{children:(0,v.jsxs)("main",{className:"pt-12 pb-6 space-y-9",children:[(0,v.jsxs)("div",{className:"space-y-9 px-16 ",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("h1",{className:"text-3xl text-center",children:null===n||void 0===n?void 0:n.title}),C&&(0,v.jsx)(Z.Z,{postId:n.id})]}),(0,v.jsx)("p",{className:" text-lg  whitespace-break-spaces",children:null===n||void 0===n?void 0:n.description})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center border-y py-3 border-zinc-700 px-16",children:[(0,v.jsx)(l.p,{user:f}),(0,v.jsx)(u.q,{time:null===n||void 0===n?void 0:n.createdAt})]}),(0,v.jsx)(N,{postId:S})]})})}}}]);
//# sourceMappingURL=928.6944deb2.chunk.js.map